"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cacheDirectory = exports.readCacheDirectoryProperty = void 0;
const path_1 = require("path");
const fileutils_1 = require("./fileutils");
function readCacheDirectoryProperty(root) {
    try {
        const nxJson = fileutils_1.readJsonFile(path_1.join(root, 'nx.json'));
        return nxJson.tasksRunnerOptions.default.options.cacheDirectory;
    }
    catch (e) {
        return undefined;
    }
}
exports.readCacheDirectoryProperty = readCacheDirectoryProperty;
function cacheDirectory(root, cacheDirectory) {
    if (cacheDirectory) {
        if (cacheDirectory.startsWith('./')) {
            return path_1.join(root, cacheDirectory);
        }
        else {
            return cacheDirectory;
        }
    }
    else {
        return path_1.join(root, 'node_modules', '.cache', 'nx');
    }
}
exports.cacheDirectory = cacheDirectory;
//# sourceMappingURL=cache-directory.js.map