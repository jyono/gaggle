"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.moveProject = void 0;
const devkit_1 = require("@nrwl/devkit");
const utils_1 = require("./utils");
const path_1 = require("path");
/**
 * Moves a project to the given destination path
 *
 * @param schema The options provided to the schematic
 */
function moveProject(tree, schema, project) {
    const destination = utils_1.getDestination(tree, schema, project);
    devkit_1.visitNotIgnoredFiles(tree, project.root, (file) => {
        // This is a rename but Angular Devkit isn't capable of writing to a file after it's renamed so this is a workaround
        const content = tree.read(file);
        const relativeFromOriginalSource = path_1.relative(project.root, file);
        const newFilePath = path_1.join(destination, relativeFromOriginalSource);
        tree.write(newFilePath, content);
        tree.delete(file);
    });
    tree.delete(project.root);
}
exports.moveProject = moveProject;
//# sourceMappingURL=move-project.js.map