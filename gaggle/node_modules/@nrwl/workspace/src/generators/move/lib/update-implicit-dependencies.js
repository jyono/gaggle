"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateImplicitDependencies = void 0;
const devkit_1 = require("@nrwl/devkit");
const utils_1 = require("./utils");
/**
 * Updates the nx.json file by renaming the project
 *
 * @param schema The options provided to the schematic
 */
function updateImplicitDependencies(tree, schema) {
    devkit_1.updateJson(tree, 'nx.json', (json) => {
        Object.values(json.projects).forEach((project) => {
            if (project.implicitDependencies) {
                const index = project.implicitDependencies.indexOf(schema.projectName);
                if (index !== -1) {
                    project.implicitDependencies[index] = utils_1.getNewProjectName(schema.destination);
                }
            }
        });
        return json;
    });
}
exports.updateImplicitDependencies = updateImplicitDependencies;
//# sourceMappingURL=update-implicit-dependencies.js.map