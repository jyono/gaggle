"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateDefaultProject = void 0;
const devkit_1 = require("@nrwl/devkit");
const utils_1 = require("./utils");
/**
 * Updates the project in the workspace file
 *
 * - update all references to the old root path
 * - change the project name
 * - change target references
 */
function updateDefaultProject(tree, schema) {
    const workspaceConfiguration = devkit_1.readWorkspaceConfiguration(tree);
    // update default project (if necessary)
    if (workspaceConfiguration.defaultProject &&
        workspaceConfiguration.defaultProject === schema.projectName) {
        workspaceConfiguration.defaultProject = utils_1.getNewProjectName(schema.destination);
        devkit_1.updateWorkspaceConfiguration(tree, workspaceConfiguration);
    }
}
exports.updateDefaultProject = updateDefaultProject;
//# sourceMappingURL=update-default-project.js.map