"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const schematics_1 = require("@angular-devkit/schematics");
const workspace_1 = require("@nrwl/workspace");
const addOutputs = () => workspace_1.updateWorkspaceInTree((workspace) => {
    for (const [, project] of Object.entries(workspace.projects)) {
        for (const [, target] of Object.entries(project.architect || {})) {
            const builder = target === null || target === void 0 ? void 0 : target.builder;
            if (!builder || target.outputs) {
                continue; // Do not mess with already defined outputs from user
            }
            if (['@nrwl/jest:jest', '@angular-devkit/build-angular:karma'].includes(builder)) {
                target.outputs = [`coverage/${project.root}`];
            }
            else if ([
                '@angular-devkit/build-angular:browser',
                '@nrwl/next:build',
                '@nrwl/node:build',
                '@nrwl/node:package',
                '@nrwl/web:build',
                '@nrwl/web:package',
                '@nrwl/storybook:build',
            ].includes(builder)) {
                target.outputs = ['{options.outputPath}'];
            }
        }
    }
    return workspace;
});
function update() {
    return schematics_1.chain([addOutputs()]);
}
exports.default = update;
//# sourceMappingURL=add-outputs-in-workspace.js.map