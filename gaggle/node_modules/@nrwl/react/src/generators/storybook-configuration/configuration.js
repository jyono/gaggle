"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.storybookConfigurationSchematic = exports.storybookConfigurationGenerator = void 0;
const tslib_1 = require("tslib");
const stories_1 = require("../stories/stories");
const devkit_1 = require("@nrwl/devkit");
const storybook_1 = require("@nrwl/storybook");
function generateStories(host, schema) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        yield stories_1.default(host, {
            project: schema.name,
            generateCypressSpecs: schema.configureCypress && schema.generateCypressSpecs,
            js: schema.js,
        });
    });
}
function storybookConfigurationGenerator(host, schema) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const installTask = yield storybook_1.configurationGenerator(host, {
            name: schema.name,
            uiFramework: '@storybook/react',
            configureCypress: schema.configureCypress,
            js: schema.js,
            linter: schema.linter,
        });
        if (schema.generateStories) {
            yield generateStories(host, schema);
        }
        return installTask;
    });
}
exports.storybookConfigurationGenerator = storybookConfigurationGenerator;
exports.default = storybookConfigurationGenerator;
exports.storybookConfigurationSchematic = devkit_1.convertNxGenerator(storybookConfigurationGenerator);
//# sourceMappingURL=configuration.js.map