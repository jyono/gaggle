/// <reference types="node" />
/**
 * Virtual file system tree.
 */
export interface Tree {
    /**
     * Root of the workspace. All paths are relative to this.
     */
    root: string;
    /**
     * Read the contents of a file.
     */
    read(filePath: string): Buffer | null;
    /**
     * Update the contents of a file or create a new file.
     */
    write(filePath: string, content: Buffer | string): void;
    /**
     * Check if a file exists.
     */
    exists(filePath: string): boolean;
    /**
     * Delete the file.
     */
    delete(filePath: string): void;
    /**
     * Rename the file or the folder.
     */
    rename(from: string, to: string): void;
    /**
     * Check if this is a file or not.
     */
    isFile(filePath: string): boolean;
    /**
     * Returns the list of children of a folder.
     */
    children(dirPath: string): string[];
    /**
     * Returns the list of currently recorded changes.
     */
    listChanges(): FileChange[];
}
/**
 * Description of a file change in the Nx virtual file system/
 */
export interface FileChange {
    /**
     * Path relative to the workspace root
     */
    path: string;
    /**
     * Type of change: 'CREATE' | 'DELETE' | 'UPDATE'
     */
    type: 'CREATE' | 'DELETE' | 'UPDATE';
    /**
     * The content of the file or null in case of delete.
     */
    content: Buffer | null;
}
export declare class FsTree implements Tree {
    readonly root: string;
    private readonly isVerbose;
    private recordedChanges;
    constructor(root: string, isVerbose: boolean);
    read(filePath: string): Buffer | null;
    write(filePath: string, content: Buffer | string): void;
    overwrite(filePath: string, content: Buffer | string): void;
    delete(filePath: string): void;
    exists(filePath: string): boolean;
    rename(from: string, to: string): void;
    isFile(filePath: string): boolean;
    children(dirPath: string): string[];
    listChanges(): FileChange[];
    private normalize;
    private fsReadDir;
    private fsIsFile;
    private fsReadFile;
    private fsExists;
    private delegateToFs;
    private filesForDir;
    private directChildrenOfDir;
    private rp;
}
export declare function flushChanges(root: string, fileChanges: FileChange[]): void;
export declare function printChanges(fileChanges: FileChange[]): void;
